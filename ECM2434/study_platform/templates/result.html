<!DOCTYPE html>
<html lang="en">
{% extends 'nav_bar_for_navigation_page.html' %}
{% load static %}
{% block head %}
<head>
  {% load static %}
    <script src="https://kit.fontawesome.com/3afd3220e7.js" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="{% static 'bs5/bootstrap.css' %}">
  <title>View Card Sets</title>
{{ block.super }}
</head>
{% endblock %}
{% block body %}
<body>
  <div class="container" style="
   display: flex;
   flex-direction: column;
   justify-content: center;
   align-items: center;
   text-align: center;
   min-height: 100vh;">
    <div class="row">
      <div class="col">
        <div class="shadow card" style="width: 30rem">
          <div class="card-body">
            <h4 class="card-title">
              Your Result
            </h4>
            <ul class="list-group my-3" style="text-align: left">
                {% for i in quiz_result %}
              <li class="list-group-item">
                <h6><b>{{ forloop.counter }}</b></h6>
                  {% for j in i %}
                      {% if forloop.first %}
                  <p>Correct Answer:<span id="Q{{ forloop.parentloop.counter }}_cor">{{ j }}</span></p>
                      {% endif %}
                      {% if forloop.last %}
                  <p>Your Choice:<span id="Q{{ forloop.parentloop.counter }}">{{ j }}</span></p>
                      {% endif %}
                      {% endfor %}
              </li>
                {% endfor %}
            </ul>
              <p>Total Mark:<span id="mark"></span>/<span id="mark_total"></span></p>
            <button class="btn btn-link link-info" onclick="window.location.href='{% url 'study_platform:flash_card' %}?i={{ i }}'">View flash cards of this quiz</button>
          </div>
        </div>
        <button class="btn btn-outline-secondary my-4" style="width: 5rem " onclick="window.location.href='{% url 'study_platform:navigation' %}'">Confirm</button>
      </div>
    </div>
  <div class="row">
  </div>
  </div>
<script>
  let ques_amount = {{ ques_amount }};
  let cor_amount = 0;
  document.getElementById("mark_total").innerHTML = ques_amount.toString();
  for(let i=1; i<=ques_amount; i++){
      let cur_ques ='Q'.concat(i.toString());
      console.log(cur_ques);
      let cur_ques_cor = cur_ques.concat('_cor')
      console.log(cur_ques_cor);
      if(document.getElementById(cur_ques).innerHTML === document.getElementById(cur_ques_cor).innerHTML){
          cor_amount += 1;
      }
  }
  document.getElementById("mark").innerHTML = cor_amount.toString();
</script>
</body>
{% endblock %}
</html>